---
# ----------------------------------- #
# Pre-tasks run before anything else! #
# ----------------------------------- #
- hosts: wsl
  # Special tag "always" -> https://docs.ansible.com/ansible/latest/user_guide/playbooks_tags.html#special-tags-always-and-never
  tags: ["always"]
  gather_facts: false
  tasks:
    - import_tasks: tasks/pre-all.yml

####################
### WSL Personal ###
####################

- name: Setup Personal WSL
  hosts: wsl
  become: true

  pre_tasks:

    # This is to get the PUID and PGID variables to use later in multiple areas
    - name: Get user info or create a user if one doesn't exist
      import_tasks: tasks/linux/pre_tasks.yml
      tags: ["always"]

  roles:

    - andrewrothstein.kubectl
    - geerlingguy.helm
    - hedii.youtube-dl

  # tasks:

  #   - name: deploy k8s manifests
  #     import_role:
  #       name: geerlingguy.k8s_manifests # Deploys everything inside file - `group_vars/k3s/vars.yml` lines - `43-46` variables - `k8s_*`
  #     tags: ['nfs', 'k8s_manifests']
  #     become: false

  #   - name: Deploy Helm Charts
  #     import_tasks: tasks/k3s/deploy_helm_charts.yml
  #     become: false
